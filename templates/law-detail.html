<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{ page_title }}</title>


    {{include "head"}}

  </head>

  <body>
  <section class="section">
    <div class="container">
      {{include "nav"}}

      <div class="tabs is-toggle">
        <ul>
          <li><a href="/">Collections</a></li>
          <li><a href="/constitutions.html">Constitutions</a></li>
          <li><a href="/electionprocesses.html">Election Processes</a></li>
          <li><a href="/titles.html">Titles</a></li>
          <li><a href="/demographics.html">Demographics</a></li>
          <li class="is-active"><a href="/laws.html">Laws</a></li>
        </ul>
      </div>

      <div class="content">
        <h1 class="title is-1">Law</h1>
        <h1 class="title is-2">{{law.name}} <a href="/collections/{{collection.name}}/{{set.name}}"><span class="tag">{{collection.name}}/{{set.name}}</span></a></h1>
        <h2 class="subtitle is-5">{{law.description}}</h2>

      <div class="card-list">
        {{#each law.properties.Sections}}
        <div class="content">
            <p class="title is-5">Section {{index1 @index}}: {{properties.Title}}</p>
            <p class="subtitle is-6">{{properties.UserDescription}}

            <div class="columns">
              <div class="column is-one-third card-list trigger-column">
                <p class="title is-5">Triggers</p>
                {{#each properties.Triggers}}
                <div class="card">
                    <table class="table">
                      <tr>
                        <th>Trigger</th>
                        <td>{{lastdot properties.Trigger.value}}</td>
                      </tr>

                      {{#each properties.Configs}}
                        {{partial this}}
                      {{/each}}

                    </table>

                    <div>
                    {{json_toggle this "trigger" ../properties.Title @index }}
                    </div>
                </div>
                {{/each}}
              </div>

              <div class="column is-two-thirds card-list ifthen-column">

                {{#each properties.IfThenBlocks}}
                <div class="if-then-block"> 

                  <div class="columns">
                    <div class="column is-one-half">
                      <p class="title is-5">If  <span class="tag">{{properties.If.properties.Comparison}}</span></p>
                      {{#each properties.If.properties.List}}
                      <div class="card">
                        {{partial this}}
                      </div>
                      {{/each}}
                    </div>

                    <div class="column is-one-half">
                      <p class="title is-5">Then</p>
                      {{#each properties.Then}}
                      <div class="card">
                        {{partial this}}
                      </div>
                      {{/each}}
                    </div>

                  </div>
                  <div>
                  {{json_toggle this "if" ../properties.Title @index }}
                  </div>
                </div>
                {{/each}}


              </div>


            </div>
        </div>
        {{/each}}
      </div>


      </div>

      <div class="content">
        Full {{json_toggle law "toplevel" "law" 0}}
      </div>


    </div>
  </section>
  </body>
</html>